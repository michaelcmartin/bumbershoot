pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
-- helix bouncer
-- michael martin, 2024

function _init()
 local i
 cls()
 hs={}
 for i=1,3 do
  hs[i]=new_helix()
  draw_helix(hs[i])
 end
end

function _update()
 local i
 for i=1,#hs do
  update_helix(hs[i])
 end
end

function _draw()
 local i
 for i=1,#hs do
  draw_helix(hs[i])
 end
end

function new_pt()
 local i, tab, pt
 pt={}
 tab={flr(rnd(128))}
 for i=2,15 do
  tab[i]=-1
 end
 pt.h=tab
 pt.d=flr(rnd(4))-2
 if (pt.d<1) pt.d-= 1
 pt.r=-1
 return pt
end

function update_pt(pt,old,new)
 local v
 pt.r=pt.h[new]
 v=pt.h[old]+pt.d
 if pt.d<0 and v<0 then
  v=0
  pt.d=flr(rnd(2))+1
 end
 if pt.d>0 and v>127 then
  v=127
  pt.d=-(flr(rnd(2))+1)
 end
 pt.h[new]=v
end

function new_helix()
 local r
 r={}
 r.x0=new_pt()
 r.x1=new_pt()
 r.y0=new_pt()
 r.y1=new_pt()
 r.i=1
 return r
end

function update_helix(helix)
 local old=helix.i
 helix.i+=1
 if (helix.i>15) helix.i=1
 update_pt(helix.x0,old,helix.i)
 update_pt(helix.x1,old,helix.i)
 update_pt(helix.y0,old,helix.i)
 update_pt(helix.y1,old,helix.i)
end

function draw_helix(helix)
 line(helix.x0.r,helix.y0.r,
      helix.x1.r,helix.y1.r,0)
 line(helix.x0.h[helix.i],
      helix.y0.h[helix.i],
      helix.x1.h[helix.i],
      helix.y1.h[helix.i],
      helix.i)
end
__label__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ee00000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0d00000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eedd000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0d0c000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eeddcc0000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0dcc0b0000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eeddc0bb00000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eddccbb0a00000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000eed0c0b0aa000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000eddccbbaa09000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000eedccbbaa0990000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000eddc0b0a099080000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000edccbbaa9908800000000000000000000000000000000000
000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee000000000eedcbbaa990887700000000000000000000000000000000000
0000000000000000ddddddddddddddddddddddddddddddddddddddddddddddddddd00eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee000000000
00000000000000cccccccccccccccccccccccccccccccccccccccccccccccccccc0ddddddddeeddddddddddddddddddddddddddddddddddddddddd0000000000
000000000000bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb00ccccccccedccccccccccccccccccccccccccccccccccccccccc00000000000
0000000000aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa0bbbbbbbbeedcbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb000000000000
000000009999999999999999999999999999999999999999999999999999900aaaaaaaaedcbaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa0000000000000
000000888888888888888888888888888888888888888888888888888888099999999eedcba99999999999999999999999999999999999999900000000000000
00007777777777777777777777777777777777777777777777777777770088888888edcba9988888888888888888888888888888888888888000000000000000
006666666666666666666666666666666666666666666666666666666077777777eecbaa98877777777777777777777777777777777777770000000000000000
55555555555555555555555555555555555555555555555555555550066666666edcba9887766666666666666666666666666666666666600000000000000000
044444444444444444444444444444444444444444444444444444455555555eecba998776655555555555555555555555555555555555000000000000000000
00033333333333333333333333333333333333333333333333333334444444edca99877665544444444444444444444444444444444440000000000000000000
0000022222222222222222222222222222222222222222222222222233333dcba987766554443333333333333333333333333333333300000000000000000000
000000011111111111111111111111111111111111111111111111112222cba98776655442333222222222222222222222222222222000000000000000000000
000000000ffffffffffffffffffffffffffffffffffffffffffffffff11ba9877655544333122211111111111111111111111111110000000000000000000000
0000000000000000000000000000000000000000000000000000000000a987765544433f222f111ffffffffffffffffffffffffff00000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000f0000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000050400000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000006054030000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000007065043020f0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000080706504321f00000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000009080760543021000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000a0908076054321f000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000b0a09080765043210000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000c0b0a090870654321f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000d0c00b0a9087065432100000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000e00d0c0b0a9087654321000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000e0d0c0b0a9087654320000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000e0d0c0ba0987654300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000e00dc0ba0987650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000e0d0cb0a987600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000e0dc0ba987000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000ed0cba980000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000edcba980000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000edcb980000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000edcba00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000edca00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000edb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000ec00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000008ce000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000008bde00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000058acde0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000368abcde000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000004689bcde000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000024689abcde00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000135689abc0de0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000245789ab0cd0e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000001346789a0bc0d0e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000f23567890ab0cd00e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000134567890ab0c0d0e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000f234567809a0b0c0d0e000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000001234567809a0b0c0d00e00000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000012345607809a0b00c0d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000f123456078090a0b0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000001234056708090a0b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000f1234506708090a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000f1203450670809000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000f1234056070800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000f12034056070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000f12304506000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000f120340500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000f0123040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000f1203000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000f01200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000f10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

